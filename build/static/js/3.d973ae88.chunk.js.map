{"version":3,"sources":["hoc/withAuthRedirect.js","components/Profile/ProfileInfo/ProfileInfo.module.css","components/Profile/Profile.module.css","components/Profile/MyPosts/MyPosts.module.css","components/Profile/MyPosts/post/Post.module.css","assets/img/Header.png","components/Profile/MyPosts/post/Post.jsx","components/Profile/MyPosts/MyPosts.jsx","components/Profile/MyPosts/MyPostsContainer.jsx","components/Profile/ProfileInfo/ProfileStatus.jsx","components/Profile/ProfileInfo/ProfileStatusWithHooks.jsx","components/Profile/ProfileInfo/ProfileInfo.jsx","components/Profile/Profile.jsx","components/Profile/ProfileContainer.jsx"],"names":["mapStateToPropsForRedirect","state","isAuth","auth","withAuthRedirect","Component","RedirectComponent","this","props","to","React","connect","module","exports","Post","className","s","item","src","avatar","message","likes","likequantity","AddNewPostFormRedux","reduxForm","form","onSubmit","handleSubmit","Field","placeholder","component","Textarea","name","validate","required","maxLength10","MyPosts","memo","postsElements","posts","map","p","postsBlock","values","addPost","newPostText","maxLengthCreator","MyPostsContainer","newPostState","profilePage","postsData","dispatch","addPostActionCreater","ProfileStatusWithHooks","useState","editMode","setEditMode","status","setStatus","useEffect","onDoubleClick","onChange","e","currentTarget","value","onBlur","updateStatus","autoFocus","ProfileInfo","profile","preloader","largeAvatar","photos","large","headerBg","HeaderBg","descriptionBlock","fullName","Profile","content","ProfileContainer","userId","match","params","loginedUserId","history","push","getUserProfile","getStatus","compose","id","withRouter"],"mappings":"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","file":"static/js/3.d973ae88.chunk.js","sourcesContent":["import React from 'react'\nimport { Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nlet mapStateToPropsForRedirect = (state) => ({\n        isAuth: state.auth.isAuth\n    })\n    \nexport const withAuthRedirect = (Component) => {\n    \n    class RedirectComponent extends React.Component {\n        render() {\n            if (!this.props.isAuth) return <Redirect to=\"/login\" />\n            return <Component {...this.props} />\n        }\n    }\n    \n\n    let ConnectedRedirectComponent = connect(mapStateToPropsForRedirect)(RedirectComponent)\n\n    return ConnectedRedirectComponent\n}\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"ProfileInfo_content__2Io2G\",\"descriptionBlock\":\"ProfileInfo_descriptionBlock__3cd8Y\",\"description\":\"ProfileInfo_description__2yWda\",\"name\":\"ProfileInfo_name__1VvQB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"Profile_content__2wLDD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postsBlock\":\"MyPosts_postsBlock__2ifKf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__2ey1u\",\"likes\":\"Post_likes__xCqO2\"};","module.exports = __webpack_public_path__ + \"static/media/Header.b4ac23a1.png\";","import React from 'react';\nimport s from \"./Post.module.css\";\nimport avatar from \"../../../../assets/img/1521018917.png\"\n\nconst Post = (props) => {\n    return (\n        <div className={s.item}>\n            <img src={avatar} />\n            <h3>{props.message}</h3>\n            <span className={s.likes}><img src=\"https://c7.uihere.com/icons/402/773/196/like-136720fdf0630770c8e860dc4d819847.png\"/>{props.likequantity}</span>\n        </div>\n    );\n}\n\nexport default Post;","import React from 'react'\nimport s from \"./MyPosts.module.css\"\nimport Post from './post/Post'\nimport {Field , reduxForm} from 'redux-form'\nimport {required , maxLengthCreator} from '../../../utils/validators/validators'\nimport { Textarea } from '../../common/FormsControl/FormsControls'\n\n\nlet AddNewPostForm = props => {\n    return <form onSubmit={props.handleSubmit}>\n        <div>\n            <Field placeholder=\"new message\" component={Textarea} name=\"newPostText\" validate={[required, maxLength10]} />\n        </div>\n        <div>\n            <button>Add post</button>\n        </div>\n    </form>\n}\n\nlet AddNewPostFormRedux = reduxForm({form: \"ProfileAddNewPostForm\"})(AddNewPostForm)\n\nconst MyPosts = React.memo(props => {\n\n    let postsElements = props.posts.map(p => <Post\n         message = {p.message} \n         likequantity = {p.likequantity}/>)\n\n    let onAddPost = (values) => {\n        props.addPost(values.newPostText)\n    }\n\n    return (\n        <div className={s.postsBlock}>\n            <h3>My post</h3>\n            <AddNewPostFormRedux onSubmit={onAddPost}/>\n            <div className={s.posts}>\n              {postsElements}\n              </div>\n        </div>\n    );\n})\n\nconst maxLength10 = maxLengthCreator(30)\n\nexport default MyPosts;","import MyPosts from './MyPosts';\nimport {addPostActionCreater } from '../../../redux/profile-reducer';\nimport { connect } from 'react-redux'\n\nlet mapStateToProps = (state) => {\n    return {\n        newPostState : state.profilePage.newPostState,\n        posts : state.profilePage.postsData\n    }\n}\nlet mapDispatchToProps = (dispatch) => {\n    return {\n        addPost: (newPostText) => {\n            dispatch(addPostActionCreater(newPostText));\n        }\n    }\n}\n\nconst MyPostsContainer = connect(mapStateToProps , mapDispatchToProps)(MyPosts);\n\nexport default MyPostsContainer;","import React from 'react'\nimport s from \"./ProfileInfo.module.css\"\n\nclass ProfileStatus extends React.Component {\n    \n    state = {\n        editMode: false,\n        status: this.props.status\n    }\n\n    activateEditMode = () => {\n        this.setState({ editMode: true })\n    }\n    deactivateEditMode = () => {\n        this.setState({ editMode: false })\n        this.props.updateStatus(this.state.status)\n    }\n    onStatusChange = (e) => {\n        this.setState({ status: e.currentTarget.value })\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevProps.status !== this.props.status) {\n            this.setState({\n                status: this.props.status\n            })\n        }\n    }\n\n    render() {\n        return <>\n            <div>\n                {!this.state.editMode &&\n                    <div>\n                        <span onDoubleClick={this.activateEditMode}>{this.props.status || \"no status\"}</span>\n                    </div>\n                }{this.state.editMode &&\n                    <div>\n                        <input onChange={this.onStatusChange} autoFocus={true} onBlur={this.deactivateEditMode} value={this.state.status} />\n                    </div>\n                }\n            </div>\n        </>\n    }\n}\n\nexport default ProfileStatus","import React, { useEffect } from 'react'\nimport { useState } from 'react'\n\nconst ProfileStatusWithHooks = (props) => {\n\n    let [editMode , setEditMode] = useState(false)\n    let [status , setStatus] = useState(props.status)\n   \n    useEffect( () => {\n        setStatus(props.status)\n    }, [props.status])\n\n    const activateEditMode = () => {\n        setEditMode(true)\n    }\n\n    const deactivateEditMode = () => {\n        setEditMode(false)\n        props.updateStatus(status)\n    }\n\n    const onStatusChange = (e) => {\n        setStatus(e.currentTarget.value)\n    }\n\n   return <>\n        <div>\n            {!editMode &&\n                <div>\n                    <span onDoubleClick={activateEditMode}>{props.status || \"no status\"}</span>\n                </div>\n            }{editMode &&\n                <div>\n                    <input onChange={onStatusChange} onBlur={deactivateEditMode} \n                    value={status}\n                    autoFocus={true}/>\n                </div>\n            }\n        </div>\n    </>\n}\n\nexport default ProfileStatusWithHooks","import React from 'react'\nimport s from \"./ProfileInfo.module.css\"\nimport Preloader from '../../common/preloader/preloader'\nimport HeaderBg from '../../../assets/img/Header.png'\nimport avatar from '../../../assets/img/1521018917.png'\nimport ProfileStatus from './ProfileStatus'\nimport ProfileStatusWithHooks from './ProfileStatusWithHooks'\n\nconst ProfileInfo = (props) => {\n    if(!props.profile){\n        return <Preloader className={s.preloader}/>\n    }\n    let largeAvatar = props.profile.photos.large\n    if(largeAvatar === null){\n        largeAvatar = avatar\n    }\n    return (\n        <div>\n        <div>\n            <img className={s.headerBg} src={HeaderBg} />\n        </div>\n        <div className={s.descriptionBlock}>\n            <img src={largeAvatar}/>\n            <div className={s.name}>\n                {props.profile.fullName}\n            </div>\n            <ProfileStatusWithHooks status={props.status} updateStatus={props.updateStatus}/>\n        </div>\n        </div>\n    );\n}\n\nexport default ProfileInfo;","import React from 'react';\nimport s from \"./Profile.module.css\";\nimport MyPostsContainer from './MyPosts/MyPostsContainer';\nimport ProfileInfo from './ProfileInfo/ProfileInfo';\nimport { Redirect } from 'react-router-dom';\n\nconst Profile = (props) => {\n\n    return (\n        <div className={s.content}>\n            <ProfileInfo profile={props.profile} status={props.status} updateStatus={props.updateStatus}/>\n            <MyPostsContainer/>\n        </div>\n    );\n}\n\nexport default Profile;","import React from 'react';\nimport Profile from './Profile';\nimport { connect } from 'react-redux';\nimport { getUserProfile , getStatus , updateStatus} from '../../redux/profile-reducer'\nimport { withRouter, Redirect } from 'react-router-dom';\nimport { withAuthRedirect } from '../../hoc/withAuthRedirect';\nimport { compose } from 'redux';\n\n\nclass ProfileContainer extends React.Component {\n\n    componentDidMount() {\n        let userId = this.props.match.params.userId\n        if (!userId) {\n            userId = this.props.loginedUserId\n            if(!userId) {\n                this.props.history.push(\"/login\")\n            }\n        }\n        this.props.getUserProfile(userId)\n        this.props.getStatus(userId)\n    }\n\n    render() {\n        return (\n            <Profile {...this.props} \n            profile={this.props.profile} status={this.props.status} \n            updateStatus={this.props.updateStatus}/>\n        )\n    }\n}\n\n\nlet mapStateToProps = (state) => ({\n    profile: state.profilePage.profile,\n    status: state.profilePage.status,\n    loginedUserId: state.auth.id,\n    isAuth: state.auth.isAuth\n})\n\nexport default compose(\n    connect(mapStateToProps, { getUserProfile , getStatus , updateStatus}),\n    withRouter,\n     withAuthRedirect\n)(ProfileContainer)\n"],"sourceRoot":""}